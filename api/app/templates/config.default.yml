# Default configuration template for Slow Query Doctor API
# This file will be created automatically if no config file is found

# API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  workers: 4
  debug: false
  allowed_origins:
    - "http://localhost:3000"
    - "http://localhost:8000"

# Security
security:
  api_key_enabled: false
  api_key: ""  # Set this in your actual config file
  cors_enabled: true

# AI/LLM Configuration
llm:
  # Primary provider for query analysis
  provider: "ollama"  # Options: ollama, openai
  
  # OpenAI Configuration (v0.1.5 compatible)
  openai:
    enabled: true  # Set to false to disable OpenAI completely
    api_key: ""  # Set in environment or actual config file
    base_url: "https://api.openai.com/v1"  # Custom endpoint support
    model: "gpt-4"  # Model to use
    timeout: 300
    fallback: true  # Use as fallback if Ollama fails
  
  # Ollama Configuration (v0.2.0+)
  ollama:
    enabled: true
    base_url: "http://localhost:11434"
    model: "llama2:13b"
    timeout: 300
    retry_count: 3  # Number of retries before falling back to OpenAI (if configured)
    
  # Common settings
  cache_results: true  # Cache analysis results
  cache_ttl_hours: 24  # Cache duration
  max_tokens: 2000     # Maximum tokens for response
  temperature: 0.1     # Lower for more consistent results

# Analysis Configuration
analysis:
  max_log_size_mb: 50
  max_queries_per_request: 100
  min_duration_ms: 1000
  top_n_queries: 10
  formats:
    - plain
    - csv
    - json

# Database Support
databases:
  postgresql:
    enabled: true
    log_formats:
      - plain
      - csv
      - json
  mysql:
    enabled: false  # Coming in v0.4.0
  sqlserver:
    enabled: false  # Coming in v0.4.0

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "api.log"
  max_size_mb: 100
  backup_count: 5

# Report Generation
reports:
  formats:
    - markdown
    - html
  syntax_highlighting: true
  include_execution_plan: true
  max_queries_per_report: 50